<h2 mat-dialog-title class="dialog-title">อัปโหลดรูปโปรไฟล์</h2>

<mat-dialog-content>
  <div class="content-container">

    <div class="preview-box" [class.has-image]="imgPreview()">
      @if(imgPreview()){
        <img [src]="imgPreview()" alt="upload photo" class="preview-img">
      } @else {
        <div class="empty-state">
          <mat-icon class="upload-icon">cloud_upload</mat-icon>
          <span>ยังไม่ได้เลือกไฟล์</span>
        </div>
      }
    </div>

    @if(imgFile){
      <div class="file-info">
        <mat-icon>image</mat-icon>
        <span>{{imgFile.name}}</span>
      </div>
    }

    @if(errorMessage()){
      <div class="error-box">
        <mat-icon>error</mat-icon>
        <span>{{errorMessage()}}</span>
      </div>
    }

    <input type="file" #filePicker (change)="onImagePicked($event)" accept=".jpg, .png, .jpeg" style="display: none;">

  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button type="button" mat-stroked-button (click)="filePicker.click()">
    <mat-icon>folder_open</mat-icon>
    เลือกรูปภาพ
  </button>
  
  <button (click)="onSubmit()" mat-flat-button color="primary" type="submit" [disabled]="!imgFile">
    <mat-icon>check</mat-icon>
    อัปโหลด
  </button>
</mat-dialog-actions>